<div id="tab-perfil" class="tab-content active">
  <div class="form-box profile-form">
    <div class="form-header">
      <div>
        <h3>üè∑Ô∏è Perfil del local</h3>
        <p class="form-subtitle">
          Datos generales, enlaces p√∫blicos y branding del negocio.
        </p>
      </div>
    </div>

    <section class="form-section">
      <div class="section-header">
        <h4>Datos b√°sicos</h4>
        <p class="section-hint">Nombre, tel√©fono, direcci√≥n y rese√±as.</p>
      </div>
      <div class="section-body">
        <div class="grid-2">
          <div class="field">
            <label>Nombre</label>
            <input id="perfilNombre" placeholder="Nombre del bar/restaurante" />
          </div>
          <div class="field">
            <label>Tel√©fono</label>
            <input id="perfilTelefono" placeholder="+34 ..." />
          </div>
        </div>

        <div class="grid-2">
          <div class="field">
            <label>Direcci√≥n</label>
            <input id="perfilDireccion" placeholder="Calle ..." />
          </div>
          <div class="field">
            <label>URL valoraciones (Google Reviews, etc.)</label>
            <input id="perfilReviews" placeholder="https://..." />
          </div>
        </div>
      </div>
    </section>

    <section class="form-section">
      <div class="section-header">
        <h4>Acceso y enlaces</h4>
        <p class="section-hint">Identificadores y URL p√∫blica.</p>
      </div>
      <div class="section-body">
        <div class="grid-2">
          <div class="field">
            <label>UID de cliente (solo lectura)</label>
            <input id="perfilUid" readonly placeholder="-" />
          </div>
          <div class="field">
            <label>Slug (solo lectura)</label>
            <input id="perfilSlug" readonly placeholder="-" />
          </div>
        </div>

        <div class="field">
          <label>URL completa (solo lectura)</label>
          <input id="perfilSlugUrl" readonly placeholder="https://..." />
          <small class="hint">Copia y pega esta URL en el navegador.</small>
        </div>

        <div class="field">
          <label>Google Place ID (para enlaces de rese√±as)</label>
          <div class="inline-actions">
            <input id="perfilGooglePlaceId" placeholder="ChIJ..." />
            <button type="button" id="buscarPlaceIdBtn" class="secondaryBtn">
              Buscar Place ID
            </button>
          </div>
          <small class="hint">
            Se usa para abrir Google Maps / escribir rese√±a autom√°ticamente.
          </small>
        </div>
      </div>
    </section>

    <section class="form-section">
      <div class="section-header">
        <h4>Wi‚ÄëFi</h4>
        <p class="section-hint">Datos visibles en la carta y PIN de acceso.</p>
      </div>
      <div class="section-body">
        <div class="grid-2">
          <div class="field">
            <label>Wi‚ÄëFi (nombre)</label>
            <input id="perfilWifi" placeholder="Nombre de la red (SSID)" />
          </div>
          <div class="field">
            <label>Wi‚ÄëFi (clave)</label>
            <input
              id="perfilWifiPass"
              type="text"
              placeholder="Clave (no se mostrar√° en la carta)"
              autocomplete="new-password"
            />
            <small class="hint">
              La clave no se muestra en la carta; solo se puede copiar.
            </small>
          </div>
        </div>

        <div class="field">
          <label>Wi‚ÄëFi (PIN para ver clave)</label>
          <input
            id="perfilWifiPin"
            type="text"
            inputmode="numeric"
            autocomplete="new-password"
            placeholder="PIN (4-8 d√≠gitos)"
          />
          <small class="hint">
            Este PIN se usa en la carta para revelar la contrase√±a del Wi‚ÄëFi.
            D√©jalo vac√≠o si no quieres cambiarlo.
          </small>
        </div>
      </div>
    </section>

    <section class="form-section">
      <div class="section-header">
        <h4>Branding</h4>
        <p class="section-hint">
          Color principal del panel y de la carta p√∫blica.
        </p>
      </div>
      <div class="section-body">
        <div class="field">
          <label>Color principal</label>
          <div class="color-palette" id="perfilColorPalette">
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #ffe800"
              data-color="#FFE800"
              aria-label="Amarillo"
            ></button>
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #ff6b00"
              data-color="#FF6B00"
              aria-label="Naranja"
            ></button>
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #f13f6f"
              data-color="#F13F6F"
              aria-label="Rosa"
            ></button>
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #7d5cff"
              data-color="#7D5CFF"
              aria-label="Violeta"
            ></button>
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #2d8cff"
              data-color="#2D8CFF"
              aria-label="Azul"
            ></button>
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #10b981"
              data-color="#10B981"
              aria-label="Verde"
            ></button>
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #dc2626"
              data-color="#DC2626"
              aria-label="Rojo"
            ></button>
            <button
              type="button"
              class="color-swatch"
              style="--swatch: #111111"
              data-color="#111111"
              aria-label="Negro"
            ></button>
          </div>

          <div class="color-picker-row">
            <input id="perfilColorPrincipal" type="color" value="#ffe800" />
            <span id="perfilColorPrincipalLabel">#FFE800</span>
          </div>

          <small class="hint">
            Se aplica al admin y al fondo de la carta manteniendo contraste en
            secciones y platos.
          </small>
        </div>
      </div>
    </section>

    <section class="form-section">
      <div class="section-header">
        <h4>Portada</h4>
        <p class="section-hint">URL directa o imagen desde Storage.</p>
      </div>
      <div class="section-body">
        <div class="media-config-grid">
          <article class="media-config-card media-config-card--cover">
            <div class="media-config-head">
              <h5>Portada principal</h5>
              <p>Hero de la carta</p>
            </div>
            <div class="grid-2">
              <div class="field">
                <label>Portada (URL)</label>
                <div class="media-url-actions">
                  <input
                    id="perfilPortadaUrl"
                    placeholder="Imagen seleccionada"
                    readonly
                  />
                  <button
                    type="button"
                    class="secondaryBtn"
                    id="perfilPortadaGaleriaBtn"
                  >
                    Mis fotos
                  </button>
                  <button type="button" class="cancel" id="perfilPortadaClearBtn">
                    Quitar
                  </button>
                </div>
              </div>
              <div class="field">
                <label>Portada (subir imagen)</label>
                <input id="perfilPortadaFile" type="file" accept="image/*" />
                <small class="hint">
                  Usa Storage (bucket) para subir sin tocar GitHub.
                </small>
              </div>
            </div>

            <div
              id="perfilPortadaPreview"
              class="image-preview"
              style="display: none"
            ></div>
          </article>

          <article class="media-config-card">
            <div class="media-config-head">
              <h5>Logo / emblema</h5>
              <p>Superpuesto en portada</p>
            </div>
            <div class="grid-2">
              <div class="field">
                <label>Logo / emblema (URL)</label>
                <div class="media-url-actions">
                  <input
                    id="perfilLogoUrl"
                    placeholder="Imagen seleccionada"
                    readonly
                  />
                  <button
                    type="button"
                    class="secondaryBtn"
                    id="perfilLogoGaleriaBtn"
                  >
                    Mis fotos
                  </button>
                  <button type="button" class="cancel" id="perfilLogoClearBtn">
                    Quitar
                  </button>
                </div>
                <small class="hint">
                  Se muestra sobre la portada en la carta p√∫blica.
                </small>
              </div>
              <div class="field">
                <label>Logo / emblema (subir imagen)</label>
                <input id="perfilLogoFile" type="file" accept="image/*" />
                <small class="hint">
                  Si no hay logo, simplemente no se muestra.
                </small>
              </div>
            </div>

            <div
              id="perfilLogoPreview"
              class="image-preview"
              style="display: none"
            ></div>
          </article>

          <article class="media-config-card">
            <div class="media-config-head">
              <h5>Imagen fallback de platos</h5>
              <p>Solo si el plato no tiene foto</p>
            </div>
            <div class="grid-2">
              <div class="field">
                <label>Imagen por defecto de platos (URL)</label>
                <div class="media-url-actions">
                  <input
                    id="perfilPlatoDefaultUrl"
                    placeholder="Imagen seleccionada"
                    readonly
                  />
                  <button
                    type="button"
                    class="secondaryBtn"
                    id="perfilPlatoDefaultGaleriaBtn"
                  >
                    Mis fotos
                  </button>
                  <button
                    type="button"
                    class="cancel"
                    id="perfilPlatoDefaultClearBtn"
                  >
                    Quitar
                  </button>
                </div>
                <small class="hint">
                  Se usa solo cuando un plato no tiene imagen propia.
                </small>
              </div>
              <div class="field">
                <label>Imagen por defecto de platos (subir imagen)</label>
                <input
                  id="perfilPlatoDefaultFile"
                  type="file"
                  accept="image/*"
                />
                <small class="hint">
                  Si no subes ninguna, los platos sin foto se ver√°n en blanco.
                </small>
              </div>
            </div>

            <div
              id="perfilPlatoDefaultPreview"
              class="image-preview"
              style="display: none"
            ></div>
          </article>
        </div>
      </div>
    </section>

    <div class="form-actions">
      <button id="guardarPerfilBtn">Guardar Perfil</button>
    </div>
  </div>

  <div id="profileImageGalleryModal" class="imodal" aria-hidden="true">
    <button
      type="button"
      class="imodal-backdrop"
      id="profileImageGalleryBackdrop"
      aria-label="Cerrar"
    ></button>
    <div
      class="imodal-card imodal-card--gallery"
      role="dialog"
      aria-modal="true"
      aria-label="Galer√≠a de im√°genes"
    >
      <div class="imodal-header">
        <h3 id="profileImageGalleryTitle" style="margin: 0">üñºÔ∏è Mis im√°genes</h3>
        <button
          type="button"
          class="imodal-close"
          id="profileImageGalleryClose"
          aria-label="Cerrar"
        >
          ‚úñ
        </button>
      </div>

      <p class="hint" style="margin-top: 8px">
        Selecciona una imagen para usarla aqu√≠ o b√≥rrala si ya no la necesitas.
      </p>

      <div class="plato-gallery-toolbar">
        <button type="button" class="secondaryBtn" id="profileImageGalleryRefresh">
          Actualizar
        </button>
      </div>
      <div id="profileImageGalleryGrid" class="plato-gallery-grid"></div>
    </div>
  </div>
</div>
