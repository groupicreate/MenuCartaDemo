<div id="tab-platos" class="tab-content">
  <div class="form-box">
    <div class="form-header">
      <div>
        <h3 id="plato-form-title">‚ûï Nuevo Plato</h3>
        <p class="form-subtitle">A√±ade platos con im√°genes y al√©rgenos.</p>
      </div>
    </div>
    <div class="edit-grid">
      <aside id="platoEditAside" class="edit-aside" style="display: none">
        <div class="edit-aside-title">Editando</div>
        <div id="platoEditAsideBody" class="edit-aside-body"></div>
      </aside>

      <div class="edit-main">
        <input type="hidden" id="editPlatoId" />
        <div class="form-stack">
          <input id="platoNombre" placeholder="Nombre del plato" />
          <input id="platoDescripcion" placeholder="Descripci√≥n" />
          <input
            id="platoPrecio"
            type="number"
            step="0.01"
            placeholder="Precio (‚Ç¨)"
          />
          <input
            id="platoSubcategoria"
            placeholder="Subcategor√≠a (ej: Para picar)"
          />
          <div class="field">
            <label for="platoCategoria">Categor√≠as (puedes elegir varias)</label>
            <select id="platoCategoria" multiple size="6"></select>
            <small class="hint">
              Usa `Ctrl` (Windows) o `Cmd` (Mac) para seleccionar varias.
            </small>
          </div>

          <div class="field plato-image-field">
            <label>Imagen del plato</label>
            <div class="plato-image-actions">
              <button type="button" class="secondaryBtn" id="platoImagenGaleriaBtn">
                Elegir de mis fotos
              </button>
              <button type="button" class="secondaryBtn" id="platoImagenUploadBtn">
                Subir nueva imagen
              </button>
              <button type="button" class="cancel" id="platoImagenClearBtn">
                Quitar imagen
              </button>
            </div>
            <input
              id="platoImagenFile"
              class="sr-only-file"
              type="file"
              accept="image/*"
            />
            <input id="platoImagenUrl" placeholder="Imagen seleccionada" readonly />
            <small id="platoImagenStatus" class="hint">Sin imagen seleccionada.</small>
          </div>
          <div id="platoImagenPreview" class="image-preview" style="display: none"></div>

          <div class="alergenos-section">
            <label>üî¥ Al√©rgenos (haz clic para seleccionar):</label>
            <div class="alergenos-grid" id="alergenosGrid"></div>
          </div>
        </div>

        <div class="form-actions">
          <button id="guardarPlatoBtn">Guardar</button>
          <button class="cancel" id="cancelPlatoBtn" style="display: none">
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toolbar (filtro + buscador) -->
  <div class="platos-toolbar">
    <label>
      Categor√≠a:
      <select id="platosCategoriaFilter"></select>
    </label>

    <input id="platosSearch" type="search" placeholder="Buscar plato..." />
  </div>

  <div id="platosContainer"></div>

  <div id="platoImagenGalleryModal" class="imodal" aria-hidden="true">
    <button
      type="button"
      class="imodal-backdrop"
      id="platoImagenGalleryBackdrop"
      aria-label="Cerrar"
    ></button>
    <div
      class="imodal-card imodal-card--gallery"
      role="dialog"
      aria-modal="true"
      aria-label="Galer√≠a de im√°genes de platos"
    >
      <div class="imodal-header">
        <h3 style="margin: 0">üñºÔ∏è Mis im√°genes de platos</h3>
        <button
          type="button"
          class="imodal-close"
          id="platoImagenGalleryClose"
          aria-label="Cerrar"
        >
          ‚úñ
        </button>
      </div>

      <p class="hint" style="margin-top: 8px">
        Selecciona una imagen ya subida para reutilizarla o b√≥rrala si ya no la quieres.
      </p>

      <div class="plato-gallery-toolbar">
        <button type="button" class="secondaryBtn" id="platoImagenGalleryRefresh">
          Actualizar
        </button>
      </div>
      <div id="platoImagenGalleryGrid" class="plato-gallery-grid"></div>
    </div>
  </div>
</div>
